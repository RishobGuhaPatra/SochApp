{"version":3,"sources":["webpack:///./src/app/paypal/paypal.module.ts","webpack:///./src/app/paypal/paypal.page.html","webpack:///./src/app/paypal/paypal.page.scss","webpack:///./src/app/paypal/paypal.page.ts"],"names":[],"mappings":"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","file":"paypal-paypal-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PayPal } from '@ionic-native/paypal/ngx';\r\n\r\nimport { PaypalPage } from './paypal.page';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: PaypalPage\r\n      }\r\n    ])\r\n  ],\r\n  providers: [PayPal,AngularFireDatabase],\r\n  declarations: [PaypalPage]\r\n})\r\nexport class PaypalPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n       Payment\\r\\n    </ion-title>\\r\\n    <div class=\\\"closeicon\\\">\\r\\n      <ion-icon name=\\\"close\\\"(click)=\\\"back()\\\"></ion-icon>\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n    <ion-button shape=\\\"round\\\" size=\\\"medium\\\" class=\\\"button\\\" lines=\\\"none\\\" color=\\\"primary\\\"\\r\\n    fill=\\\"solid\\\" (click)=\\\"checkpayment()\\\" expand=\\\"full\\\">\\r\\n    Paypal\\r\\n  </ion-button>\\r\\n</ion-content>\\r\\n\"","module.exports = \".closeicon {\\n  text-align: right; }\\n  .closeicon ion-icon {\\n    font-size: 35px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGF5cGFsL0Q6XFxpb25pY1Byb2plY3RcXFNvY2gtMS4wL3NyY1xcYXBwXFxwYXlwYWxcXHBheXBhbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxpQkFBaUIsRUFBQTtFQURyQjtJQUdNLGVBQWUsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BheXBhbC9wYXlwYWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5jbG9zZWljb24ge1xyXG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICBpb24taWNvbiB7XHJcbiAgICAgIGZvbnQtc2l6ZTogMzVweDtcclxuICAgIH1cclxuICB9Il19 */\"","import { Component } from '@angular/core';\r\nimport { PayPal, PayPalPayment, PayPalConfiguration, PayPalPaymentDetails } from '@ionic-native/paypal/ngx';\r\nimport { AlertController, NavController } from '@ionic/angular';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\nimport * as firebase from 'firebase';\r\n\r\n\r\n@Component({\r\n  selector: 'app-paypal',\r\n  templateUrl: 'paypal.page.html',\r\n  styleUrls: ['paypal.page.scss'],\r\n})\r\nexport class PaypalPage {\r\n\r\n\r\n  selectedPlan: any = [];\r\n  totalAmount: any;\r\n  totalAmountInDollar: any;\r\n  counsellorId: any;\r\n  counsellorName: any;\r\n\r\n  constructor(public payPal: PayPal,\r\n              public navController: NavController,\r\n              public activRoute: ActivatedRoute,\r\n              public db: AngularFireDatabase,\r\n              public router: Router\r\n  ) {\r\n    this.activRoute.params.subscribe((params) => {\r\n      if (params && params.selectedPlan) {\r\n        this.counsellorId = params.counsellorId;\r\n        this.counsellorName = params.counsellorName;\r\n        this.selectedPlan = JSON.parse(params.selectedPlan);\r\n        this.totalAmount = params.totalAmount;\r\n        this.totalAmountInDollar = this.totalAmount / 69.54;\r\n        this.totalAmountInDollar = this.totalAmountInDollar.toString();\r\n      }\r\n    });\r\n  }\r\n  // PayPalEnvironmentSandbox: 'AaVdKOVqUONrDYqtPPMK3yVvBPGVGdBlHyLFz9QQPVz0iSnXCZZ6szCGomfqNMZvOFF1cznLTTsEAHyY'\r\n  // PayPalEnvironmentProduction: 'AWrSVmrBBUsp2tF4EkpzdGw5-D0Hx71jkt4TMYNAkYMiAXbvv98A6-Iev1MzRbVDEs743DUcUXZf3Qkr',\r\n  makePayment() {\r\n    // this.addSesionData();\r\n    this.payPal.init({\r\n\r\n      PayPalEnvironmentProduction: 'AQNy5Xwj4YAIE1bIf9TOpdJ3pGAdZ2wlNTZzi-88qHJQt2hv1k9WUrej18QmTpTil-TqjjN5pSsRua9c',\r\n      PayPalEnvironmentSandbox: ''\r\n    }).then(() => {\r\n      this.payPal.prepareToRender('PayPalEnvironmentProduction', new PayPalConfiguration({\r\n        acceptCreditCards: false,\r\n        languageOrLocale: 'en-US',\r\n        merchantName: 'Rishob Guha Patra',\r\n        merchantPrivacyPolicyURL: '',\r\n        merchantUserAgreementURL: ''\r\n      })).then(() => {\r\n        const detail = new PayPalPaymentDetails(this.totalAmountInDollar, '0.00', '0.00');\r\n        const payment = new PayPalPayment(this.totalAmountInDollar, 'USD', 'Soch', 'Sale', detail);\r\n        this.payPal.renderSinglePaymentUI(payment).then((res) => {\r\n          console.log('Payments Success');\r\n          this.addSesionData();\r\n          console.log(res);\r\n        }, () => {\r\n          console.log('Error or render dialog closed without being successful');\r\n        });\r\n      }, () => {\r\n        console.log('Error in configuration');\r\n      });\r\n    }, (err) => {\r\n      console.log('Error in initialization, maybe PayPal isn\\'t supported or something else' + JSON.stringify(err));\r\n    });\r\n  }\r\n  back() {\r\n    this.navController.pop();\r\n  }\r\n\r\n  addSesionData() {\r\n    let res = this.db.list('sessions').push({\r\n      cid: this.counsellorId,\r\n      counsellorName: this.counsellorName,\r\n      uid: localStorage.getItem('userid'),\r\n      selectedPlan: this.selectedPlan\r\n    });\r\n    if (res) {\r\n      this.router.navigate(['councelor-bubble', 0, res.key, this.counsellorId, this.counsellorName])\r\n    }\r\n  }\r\n  checkpayment() {\r\n    firebase.database().ref('features').once('value', snap => {\r\n      const data = snap.val();\r\n      if (data.payment) {\r\n        this.makePayment();\r\n      }\r\n      else {\r\n        this.addSesionData();\r\n      }\r\n      // console.log(data)\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}