{"version":3,"sources":["webpack:///./src/app/edit-profile/edit-profile.module.ts","webpack:///./src/app/edit-profile/edit-profile.page.html","webpack:///./src/app/edit-profile/edit-profile.page.scss","webpack:///./src/app/edit-profile/edit-profile.page.ts"],"names":[],"mappings":"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","file":"edit-profile-edit-profile-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EditProfilePage } from './edit-profile.page';\r\nimport { ShareModule } from '../share.module';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n\tRouterModule.forChild(routes),\r\n\tShareModule\r\n  ],\r\n  declarations: [EditProfilePage],\r\n  providers:[AngularFireDatabase]\r\n})\r\nexport class EditProfilePageModule {}\r\n","module.exports = \"<ion-header>\\r\\n\\t<ion-toolbar>\\r\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\r\\n\\t\\t\\t<ion-back-button defaultHref=\\\"tabs\\\"></ion-back-button>\\r\\n\\t\\t</ion-buttons>\\r\\n\\t\\t<ion-title>Edit Profile</ion-title>\\r\\n\\t</ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n\\r\\n\\t<app-loading *ngIf=\\\"busy\\\"></app-loading>\\r\\n\\t<div *ngIf=\\\"!busy\\\">\\r\\n\\r\\n\\t\\t<input type=\\\"file\\\" #fileBtn class=\\\"filebtn\\\" (change)=\\\"uploadPic($event)\\\" />\\r\\n\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t<ion-avatar>\\r\\n\\t\\t\\t\\t<img *ngIf=\\\"userDetail?.profilePic\\\" src=\\\"https://ucarecdn.com/{{ userDetail.profilePic }}/{{ scaleCrop }}/ \\\" />\\r\\n\\t\\t\\t\\t<img *ngIf=\\\"!userDetail?.profilePic\\\" src=\\\"../../assets/icon/user.png\\\">\\r\\n\\t\\t\\t</ion-avatar>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\r\\n\\t\\t<div class=\\\"profile-info\\\">\\r\\n\\t\\t\\t<ion-item-divider position=\\\"floating\\\">\\r\\n\\t\\t\\t\\t<ion-label>\\r\\n\\t\\t\\t\\t\\tSecurity\\r\\n\\t\\t\\t\\t</ion-label>\\r\\n\\t\\t\\t</ion-item-divider>\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Username</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.username\\\"></ion-input>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">New Password?</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.newpassword\\\"></ion-input>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Enter old password</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.password\\\"></ion-input>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item-divider position=\\\"floating\\\">\\r\\n\\t\\t\\t\\t<ion-label>\\r\\n\\t\\t\\t\\t\\tProfile\\r\\n\\t\\t\\t\\t</ion-label>\\r\\n\\t\\t\\t</ion-item-divider>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Name</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.name\\\"></ion-input>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"close-circle\\\" slot=\\\"end\\\"></ion-icon>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Phone Number</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.phonenumber\\\"></ion-input>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"close-circle\\\" slot=\\\"end\\\"></ion-icon>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Email</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.email\\\"></ion-input>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"close-circle\\\" slot=\\\"end\\\"></ion-icon>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Interests</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.interest\\\"></ion-input>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"close-circle\\\" slot=\\\"end\\\"></ion-icon>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\t\\t\\t<ion-item>\\r\\n\\t\\t\\t\\t<ion-label position=\\\"floating\\\">Brief Background</ion-label>\\r\\n\\t\\t\\t\\t<ion-input [(ngModel)]=\\\"userDetail.background\\\"></ion-input>\\r\\n\\t\\t\\t\\t<ion-icon name=\\\"close-circle\\\" slot=\\\"end\\\"></ion-icon>\\r\\n\\t\\t\\t</ion-item>\\r\\n\\t\\t\\t<ion-button class=\\\"button\\\" fill=\\\"solid\\\" expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"updateDetails()\\\">Save</ion-button>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t</div>\\r\\n\\r\\n</ion-content>\"","module.exports = \".profile-pic {\\n  height: 70vh;\\n  width: auto;\\n  margin: auto;\\n  display: block; }\\n\\n.button {\\n  margin-top: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdC1wcm9maWxlL0Q6XFxpb25pY1Byb2plY3RcXFNvY2gtMS4wL3NyY1xcYXBwXFxlZGl0LXByb2ZpbGVcXGVkaXQtcHJvZmlsZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0E7RUFDQyxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixjQUFjLEVBQUE7O0FBRWY7RUFDQyxnQkFBZ0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2VkaXQtcHJvZmlsZS9lZGl0LXByb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZpbGVidG4ge1xyXG5cdC8vIG9wYWNpdHk6IDA7XHJcblx0Ly8gcG9zaXRpb246IGFic29sdXRlO1xyXG5cdC8vIHRvcDogLTEwMGVtO1xyXG5cdC8vIGxlZnQ6IC0xMDBlbTtcclxufVxyXG5cclxuLnByb2ZpbGUtcGljIHtcclxuXHRoZWlnaHQ6IDcwdmg7XHJcblx0d2lkdGg6IGF1dG87XHJcblx0bWFyZ2luOiBhdXRvO1xyXG5cdGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi5idXR0b24ge1xyXG5cdG1hcmdpbi10b3A6IDEwcHg7XHJcbn0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\n// import { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\r\nimport { UserService } from '../user.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport * as firebase from 'firebase';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\n\r\n@Component({\r\n\tselector: 'app-edit-profile',\r\n\ttemplateUrl: './edit-profile.page.html',\r\n\tstyleUrls: ['./edit-profile.page.scss'],\r\n})\r\nexport class EditProfilePage implements OnInit {\r\n\r\n\t// mainuser: AngularFirestoreDocument\r\n\tsub\r\n\tusername: string\r\n\tprofilePic: string\r\n\r\n\tpassword: string\r\n\tnewpassword: string\r\n\r\n\tbusy: boolean = false\r\n\tcurrentUserId: any;\r\n\tuserDetail: any = {};\r\n\r\n\t@ViewChild('fileBtn') fileBtn: {\r\n\t\tnativeElement: HTMLInputElement\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tprivate http: Http,\r\n\t\t// private afs: AngularFirestore,\r\n\t\tpublic db: AngularFireDatabase,\r\n\t\tprivate router: Router,\r\n\t\tprivate alertController: AlertController,\r\n\t\tprivate user: UserService) {\r\n\t\t// this.mainuser = afs.doc(`users/${user.getUID()}`)\r\n\t\t// ++++++++++++++++++++++\r\n\t\tthis.currentUserId = localStorage.getItem('userid')\r\n\t\tthis.db.object('User/' + this.currentUserId).valueChanges()\r\n\t\t\t.subscribe((data: any) => {\r\n\t\t\t\tif (data) {\r\n\r\n\t\t\t\t\tthis.userDetail = data;\r\n\t\t\t\t\tconsole.log('userData', this.userDetail);\r\n\t\t\t\t\tif (this.userDetail.profilePic)\r\n\t\t\t\t\t\tthis.profilePic = this.userDetail.profilePic;\r\n\t\t\t\t\tthis.user.setUser(this.userDetail);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\t// this.sub.unsubscribe()\r\n\t}\r\n\r\n\tupdateProfilePic() {\r\n\t\tthis.fileBtn.nativeElement.click()\r\n\t}\r\n\r\n\tuploadPic(event) {\r\n\t\tthis.busy = true;\r\n\t\tconst files = event.target.files\r\n\r\n\t\tconst data = new FormData()\r\n\t\tdata.append('file', files[0])\r\n\t\tdata.append('UPLOADCARE_STORE', '1')\r\n\t\tdata.append('UPLOADCARE_PUB_KEY', 'ada5e3cb2da06dee6d82')\r\n\r\n\t\tthis.http.post('https://upload.uploadcare.com/base/', data)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tconst uuid = event.json().file;\r\n\t\t\t\tthis.profilePic = uuid;\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.db.object('User/' + this.currentUserId).update({\r\n\t\t\t\t\tprofilePic: this.profilePic\r\n\t\t\t\t})\r\n\t\t\t\t// this.mainuser.update({\r\n\t\t\t\t// \tprofilePic: uuid\r\n\t\t\t\t// })\r\n\t\t\t})\r\n\t}\r\n\r\n\tasync presentAlert(title: string, content: string) {\r\n\t\tconst alert = await this.alertController.create({\r\n\t\t\theader: title,\r\n\t\t\tmessage: content,\r\n\t\t\tbuttons: ['OK']\r\n\t\t})\r\n\r\n\t\tawait alert.present()\r\n\t}\r\n\r\n\tasync updateDetails() {\r\n\t\tthis.busy = true\r\n\r\n\t\t// if(!this.userDetail.password) {\r\n\t\t// \tthis.busy = false\r\n\t\t// \treturn this.presentAlert('Error!', 'You have to enter a password')\r\n\t\t// }\r\n\r\n\t\t// try {\r\n\t\t// \tawait this.user.reAuth(this.userDetail.username, this.userDetail.password)\r\n\t\t// } catch(error) {\r\n\t\t// \tthis.busy = false\r\n\t\t// \tconsole.log(error);\r\n\r\n\t\t// \treturn this.presentAlert('Error!', 'Wrong password!')\r\n\t\t// }\r\n\r\n\t\t// if(this.userDetail.newpassword) {\r\n\t\t// \tawait this.user.updatePassword(this.userDetail.newpassword)\r\n\t\t// }\r\n\r\n\t\t// if(this.userDetail.username !== this.user.getUsername()) {\r\n\t\t// \tawait this.user.updateEmail(this.userDetail.username)\r\n\t\t// \t// this.mainuser.update({\r\n\t\t// \t// \tusername: this.username\r\n\t\t// \t// })\r\n\t\t// }\r\n\t\t// name:this.userDetail.name,\r\n\t\t// phonenumber:this.userDetail.phonenumber,\r\n\t\t// email:this.userDetail.email,\r\n\t\t// interest:this.userDetail.interest,\r\n\t\t// background:this.userDetail.background\r\n\t\tthis.db.object('User/' + this.currentUserId).update(this.userDetail)\r\n\r\n\t\tthis.password = \"\"\r\n\t\tthis.newpassword = \"\"\r\n\t\tthis.busy = false\r\n\r\n\t\tawait this.presentAlert('Done!', 'Your profile was updated!')\r\n\r\n\t\tthis.router.navigate(['/tabs'])\r\n\t}\r\n\r\n}\r\n"],"sourceRoot":""}